<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>111</title>
  <link rel="stylesheet" href="./example/example.css">
  <!-- <link rel="stylesheet" href="http://ecstest.ledc.changyan.cn/common-static/js/common/common.navbar.css"> -->
</head>
<body>
  <div id="content_main"></div>
  <button id="uploader-button" class="example-button">点击上传</button>
  <div class="example-list">
    <div id="filelist"></div>
  </div>
  <div id="flash-el"></div>
  <script>
    function cback () {
      console.log('cssss')
    }
    function _makeFlashHTML (opts) {
      return ('<object id="#id#" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="' + (opts.width || '100%') + '" height="' + (opts.height || '100%') + '">' +
            '<param name="movie" value="#src#" />' +
            '<param name="flashvars" value="#flashvars#" />' +
            '<param name="swliveconnect" value="true" />' +
            '<param name="allowscriptaccess" value="always" />' +
            '<param name="allownetworking" value="all" />' +
            '<param name="menu" value="false" />' +
            '<param name="wmode" value="#wmode#" />' +
            '<embed flashvars="#flashvars#" swliveconnect="true" allownetworking="all" allowscriptaccess="always" name="#id#" src="#src#" width="' + (opts.width || '100%') + '" height="' + (opts.height || '100%') + '" menu="false" wmode="transparent" type="application/x-shockwave-flash"></embed>' +
            '</object>').replace(/#(\w+)#/ig, function (a, name) { return opts[name] })

    }
    document.getElementById('flash-el').innerHTML = _makeFlashHTML({
      id: 'flash-el',
      src: './dist/FileAPI.flash.swf',
      flashvars: 'callback=cback',
      wmode: 'opaque'
    })
  </script>
  <script src="dist/uploader.js"></script>
  <script>
  var UPLOADER_PATH = 'http://10.4.86.4:4001/preupload'
  var uploader = new window.Uploader({
    path: UPLOADER_PATH,
    headers: {},
    uploadPath: 'http://10.4.86.4:4000/upload/fileUpload',
    btnEl: document.getElementById('uploader-button'),
    fileListEl: document.getElementById('filelist'),
    env: 'webui', // webui > mobileui > websdk > mobilesdk
    theme: 'default',
    accepts: 'images/*', // 可选，接收格式，如果
    whiteSuffixList: ['png', 'gif', 'jpeg', 'mp4', 'zip'], // 可上传图片的格式
    // auto: false,
    customUI: false,
    md5: true,
    type: 'ws', // 'ws'>'http'>'flash'. default: 'ws'
    queued: '2'
  })
  // 选择文件
  uploader.on('change', function (files) {
    console.log('change')
  })
  // 文件正在上传中
  uploader.on('progress', function (files) {
    console.log('progress...', files)
  })
  // 文件上传完成
  uploader.on('success', function (file) {
    console.log('success')
  })
  // 所有的文件都上传完成
  uploader.on('alluploaded', function () {
    console.log('allupload')
  })
  // 文件上传失败
  uploader.on('fail', function (file) {
    console.log('fail')
  })
  console.log(uploader)
  </script>
  <!-- <script src="http://ecstest.ledc.changyan.cn/common-static/js/jquery-1.8.3.min.js"></script>
  <script>
  $.getScript('http://ecstest.ledc.changyan.cn/common-static/js/common/common.navbar.js', function () {
    console.log(222)
  })
  </script> -->
</body>
</html>